<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/vaadin-date-picker/vaadin-date-picker.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../../bower_components/google-chart/google-chart.html">


<dom-module id="blg-report-viewer">
    <template>
        <style include="shared-styles">
            :host {
                display: block;

                padding: 10px;
            }

            .card {
                padding: 0;
            }

            .card .ivr-title {
                height: 80px;
                display: flex;
                align-items: center;
                padding: 0px 20px;
                background: var(--oredata-color);
                background: #fff;
                border-bottom: 3px solid var(--oredata-color);
                /* @apply --shadow-elevation-2dp; */
            }

            .card .ivr-title h1 {
                margin: 0;
                font-weight: 500;
                color: #222;
            }

            .card .ivr-title vaadin-date-picker {
                color: #fff;
                margin-top: -10px;
            }



            .card .ivr-container {
                margin: 20px;
                @apply --layout-vertical;
                @apply --layout-center-center;
            }

            .flex {
                @apply --layout-flex;
            }

            .not-found-data {
                min-height: 50px;
                font-weight: bold;
                font-size: 20px;
            }

            .image {
                height: 400px;
                width: 600px;
            }

            .image iron-image {
                width: 100%;
                height: 100%;
            }

            google-chart {
                height: 400px;
                width: 50em;
            }

        </style>
        <div class="card">
            <div class="ivr-title">
                <h1>[[chartData.title]]</h1>
                <div class="flex"></div>
                <vaadin-date-picker label="Tarih" placeholder="Tarih Seçiniz" value="{{datevalue}}">
                </vaadin-date-picker>
            </div>
            <div class="ivr-container">
                <template is="dom-if" if=[[showIVR]]>
                    <div class="image">
                        <!-- <iron-image src="[[image]]" preload sizing="cover"></iron-image> -->

                        <!-- Example Of data: 
                            [["Categories", "Value"], ["Category 1", 1.0], ["Category 2", 1.1]]
                        
                            <google-chart .... data='http://example.com/chart-data.json'></google-chart>
                            <google-chart .... data='[["Categories", "Value"], ["Category 1", 1.0], ["Category 2", 1.1]]'></google-chart>

                            or 

                            cols='[{"label":"Report", "type":"string"}, {"label":"Process", "type":"number"}]'
                            rows='[["Hangup", 46.5],["Disconnect", 3.5],["Agent", 50]]'>
                        -->
                        <google-chart type=[[chartData.type]] options=[[chartData.options]] data=[[chartData.data]]></google-chart>

                    </div>
                </template>
                <template is="dom-if" if=[[!showIVR]]>
                    <h4 class="not-found-data">
                        Veri Bulunamadı!
                    </h4>
                </template>
            </div>

    </template>

    <script>
        /**
         * `blg-report-viewer` Description
         *
         * @summary ShortDescription.
         * @customElement
         * @polymer
         * @extends {Polymer.Element}
         */
        class BlgReportViewer extends Polymer.Element {
            /**
             * String providing the tag name to register the element under.
             */
            static get is() {
                return 'blg-report-viewer';
            }

            static get properties() {
                return {
                    title: {
                        type: String,
                        value: 'Report'
                    },
                    image: {
                        type: String,
                        value: ''
                    },
                    datevalue: {
                        type: String,
                        value: '2018-03-05',
                        observer: '_datevalueChanged'
                    },
                    showIVR: {
                        type: Boolean,
                        value: true,
                        notify: true
                    },
                    type: {
                        type: String,
                        value: '',
                    },
                    options: {
                        type: Object,
                        value: {}
                    },
                    data: {
                        type: Object,
                        value: {}
                    },
                    chartData: {
                        type: Object,
                        value: {}
                    }
                };
            }

            _datevalueChanged(newValue, oldVal) {
                if (newValue !== '') {
                    // console.log('datevalue', newValue);

                    if (newValue === "2018-03-05") {
                        // console.log('gridi');
                        this.set('showIVR', true);
                    } else {
                        this.set('showIVR', false);
                    }
                }


            }

            connectedCallback() {
                super.connectedCallback();

                // Set the Finnish locale.
                moment.locale('tr');

                // Assign the i18n property with locale data from Moment.js.
                this.shadowRoot.querySelector('vaadin-date-picker').i18n = {
                    monthNames: moment.months(),
                    weekdays: moment.weekdays(),
                    weekdaysShort: moment.weekdaysShort(),
                    firstDayOfWeek: moment.localeData().firstDayOfWeek(),
                    formatDate: function (d) {
                        return moment(d).format(moment.localeData().longDateFormat('L'));
                    },
                    parseDate: function (s) {
                        return moment(s, moment.localeData().longDateFormat('L')).toDate();
                    },
                    formatTitle: function (monthName, fullYear) {
                        return monthName + ' ' + fullYear;
                    }
                };

            }


        }

        window.customElements.define(BlgReportViewer.is, BlgReportViewer);
    </script>
</dom-module>